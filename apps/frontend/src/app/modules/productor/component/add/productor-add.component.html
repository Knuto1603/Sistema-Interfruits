<div class="position-absolute flex-grow-1 d-flex flex-column h-100 w-100 inset-0 bg-white dark:bg-transparent">
  <!-- Header -->
  <div class="d-flex flex-row align-items-center justify-content-between border-bottom p-3 p-md-4">
    <!-- Title -->
    <div class="h3 fw-bold mb-0 h2-sm">Productor - Nuevo</div>
    <div class="d-flex align-items-center">
      <!-- Close button -->
      <close-button [routerLink]="['../']" />
    </div>
  </div>

  <!-- Compose form -->
  <form class="mt-4 d-flex flex-column p-3 p-md-4" autocomplete="off" [formGroup]="productorForm">
    <div class="row g-4">

      <!-- Codigo -->
      <div class="col-12 col-sm-6 col-md-4">
        <mat-form-field class="d-flex align-items-center w-100">
          <mat-label>Código</mat-label>
          <input matInput [formControlName]="'codigo'" [spellcheck]="false" readonly="true" />
          @if (this.form['codigo'].hasError('maxlength')) {
            <mat-error> Máximo <strong>12</strong> carácteres </mat-error>
          }
          @if (this.form['codigo'].hasError('pattern')) {
            <mat-error> Caracteres no validos </mat-error>
          }
        </mat-form-field>
      </div>

      <!-- CLP -->
      <div class="col-12 col-sm-6 col-md-4">
        <mat-form-field class="d-flex align-items-center w-100">
          <mat-label>CLP</mat-label>
          <input matInput [formControlName]="'clp'" [spellcheck]="false" appAutoFormat placeholder="XXX-XXXXX-XX" />
          @if (this.form['clp'].hasError('pattern')) {
            <mat-error> Máximo <strong>12</strong> carácteres </mat-error>
          }
        </mat-form-field>
      </div>

      <!-- Name -->
      <div class="col-12 col-sm-6 col-md-4">
        <mat-form-field class="d-flex align-items-center w-100">
          <mat-label>Nombre</mat-label>
          <input matInput [formControlName]="'nombre'" autocomplete="off" />
          @if (this.form['nombre'].hasError('required')) {
            <mat-error> Campo <strong>requerido</strong> </mat-error>
          }
          @if (this.form['nombre'].hasError('minlength')) {
            <mat-error> Mínimo <strong>2</strong> carácteres </mat-error>
          }
          @if (this.form['nombre'].hasError('maxlength')) {
            <mat-error> Máximo <strong>100</strong> carácteres </mat-error>
          }
        </mat-form-field>
      </div>

      <!-- mtdCeratitis -->
      <div class="col-12 col-sm-6 col-md-4">
        <mat-form-field class="d-flex align-items-center w-100">
          <mat-label>MTD Ceratitis</mat-label>
          <input matInput [formControlName]="'mtdCeratitis'" [spellcheck]="false" />
          @if (this.form['mtdCeratitis'].hasError('pattern')) {
            <mat-error> Tiene que ser de la forma <strong>x.xxxx</strong> </mat-error>
          }
        </mat-form-field>
      </div>

      <!-- mtdAnastrepha -->
      <div class="col-12 col-sm-6 col-md-4">
        <mat-form-field class="d-flex align-items-center w-100">
          <mat-label>MTD Anastrepha</mat-label>
          <input matInput [formControlName]="'mtdAnastrepha'" [spellcheck]="false" />
          @if (this.form['mtdAnastrepha'].hasError('pattern')) {
            <mat-error> Tiene que ser de la forma <strong>x.xxxx</strong> </mat-error>
          }
        </mat-form-field>
      </div>

      <div>
        <input type="hidden" [formControlName]="'periodoId'">
        <input type="hidden" [formControlName]="'frutaId'">
      </div>


      <!-- Active -->
      <div class="col-12 col-sm-6 col-md-4 d-flex align-items-center">
        <mat-slide-toggle [formControlName]="'isActive'" [color]="'primary'">
          {{ isActiveControl?.value === true ? 'Habilitado' : 'Deshabilitado' }}
        </mat-slide-toggle>
      </div>
    </div>

    <!-- Actions -->
    <div class="mt-4 d-flex flex-row justify-content-between">
      <save-button appDebounceClick [disabled]="productorForm.invalid || saving()" (debounceClick)="save()" />
    </div>
  </form>
</div>
